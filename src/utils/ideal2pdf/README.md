# ideal2pdf

## Overview

ideal2pdf is a tool to visualize the C2 Ideal intermediate representation. The
tool works as a complement to the interactive IdealGraphVisualizer, parsing
graph files generated by the JVM and drawing each graph into a separate PDF
file.

## Dependencies

ideal2pdf has the following dependencies:

- Python ≥ 3.8
- Graphviz ≥ 2.43

### Installation on Ubuntu 20.04

```
$ sudo apt-get install python3 python3-pygraphviz python3-matplotlib python3-pdfrw graphviz
```

## Usage

To draw each graph from an XML graph file `foo.xml`, run:

```
./ideal2pdf foo.xml
```

To list the id, method, and compiler phase of each graph, run:

```
./ideal2pdf foo.xml --list
```

By default, ideal2pdf draws all graphs in the XML graph file, including all
nodes in each graph. Even if this operation is parallelized, it can be very
costly for large XML graph files. To select only a graph with id `i`, method
`m`, and compiler phase `p`, run:

```
./ideal2pdf foo.xml --filter "g == i and method(g) == 'm' and phase(g) == 'p'"
```

To select a subset `n1`, `n2`, ..., `ni` of nodes to be shown, run:

```
./ideal2pdf foo.xml --highlight "n in [n1, n2, ..., nj]"
```

As is the case with `--filter`, the node subset specification is an arbitrary
Python expression, and can include node property queries such as `name(n)` or
`category(n)`.

To create a single PDF with all drawn graphs, run:

```
./ideal2pdf foo.xml --animate
```

To see all available options, run:

```
./ideal2pdf --help
```

For instructions to generate graph files from the JVM, see
`src/utils/IdealGraphVisualizer/README.md`.